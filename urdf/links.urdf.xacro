<?xml version="1.0"?>

<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="arm">

  <xacro:macro name="cylinder_inertial" params="radius length mass *origin">
    <inertial>
      <mass value="${mass}" />
      <xacro:insert_block name="origin" />
      <inertia ixx="${0.0833333 * mass * (3 * radius *
      radius + length * length)}" ixy="0.0" ixz="0.0"
      iyy="${0.0833333 * mass * (3 * radius * radius +
      length * length)}" iyz="0.0"
      izz="${0.5 * mass * radius * radius}" />
    </inertial>
  </xacro:macro>

    <link name="world_link">
    <visual>
      <geometry>
          <box size="0.1 0.1 0.1" /> 
      </geometry>
      <origin rpy="0 0 0.5" xyz="0 0 0"/>
      <material name="green">
      <color rgba="0 1 0 0.9"/>
    </material>
    </visual>
    <inertial>
      <mass value="0.1"/>
      <inertia ixx="1.06682889e+08" ixy="0.0" ixz="0.0" iyy="9.92165844e+07" iyz="0.0" izz="1.26939175e+08"/>
    </inertial> 
    <collision>
      <geometry>
        <box size="0.1 0.1 0.1" /> 
      </geometry>
      <origin rpy="0 0 0.5" xyz="0 0 0"/>
      <material name="green">
      <color rgba="0 1 0 0.9"/>
    </material>
    </collision>  
  </link>

  <joint name="j0" type="revolute">
    <parent link="world_link"/>
    <child link="link1"/>
    <origin xyz="0 0 0.05"/> <!--Position of the joint with respect the previous link-->
    <axis xyz="0 0 1"/>
    <limit effort="300" velocity="0.1" lower="-2.57" upper="2.57"/>
  </joint>

  <link name="link1">
    <visual>
      <geometry>
          <box size="0.1 0.1 0.2" />
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0.1"/> <!--Position of the center of mass-->
    </visual> 
      <collision>
      <geometry>
          <box size="0.1 0.1 0.2" />
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0.1"/> <!--Position of the center of mass-->
    </collision> 
    <inertial>
      <mass value="0.1"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>
    </inertial>
  </link>

 <joint name="j1" type="revolute">
    <parent link="link1"/>
    <child link="link2"/>
    <origin xyz="0 0 0.2"/>  
    <axis xyz="0 1 0" />
    <limit effort="300" velocity="0.1" lower="-2.57" upper="2.57"/>
  </joint>

  <link name="link2">
    <visual>
      <geometry>
          <box size="0.1 0.1 0.2" />
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0.1"/>  
    </visual> 
    <inertial>
      <mass value="0.1"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>
    </inertial>
    <collision>
      <geometry>
          <box size="0.1 0.1 0.2" />
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0.1"/>  
    </collision> 
  </link>


 <joint name="j2" type="revolute">
    <parent link="link2"/>
    <child link="link3"/>
    <origin xyz="0 0 0.2"/>  
    <axis xyz="0 1 0" />
    <limit effort="300" velocity="0.1" lower="-2.57" upper="2.57"/>
  </joint>


 <link name="link3">
    <visual>
      <geometry>
          <cylinder length="0.2" radius="0.05"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0.1"/>  
    </visual> 
     <xacro:cylinder_inertial radius="0.1" length="0.2" mass="0.3">
      <origin xyz="0 0 0" rpy="0 0 0" />
      </xacro:cylinder_inertial>
  </link>

<!--     <xacro:arg name="mass" default="20"/>
    <xacro:property name="mass" value="10"/>
 
     <xacro:arg name="initial_pos" default="$(find arm_description)/config/initial_pos.yaml"/>

    <xacro:property name="config_joint_limit_parameters" value="${xacro.load_yaml(initial_pos)}"/>

    <xacro:property name="sec_limits" value="${config_joint_limit_parameters['j0']}"/>
    -->

</robot>
